<% if current_user.has_role? :admin %>
<%- model_class = Tutor -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.titleize %></h1>
</div>

<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:id) %>:</strong></dt>
  <dd><%= @tutor.id %></dd>
  <dt><strong><%= model_class.human_attribute_name(:user_id) %>:</strong></dt>
  <dd><%= @tutor.user_id %></dd>
  <dt><strong><%= model_class.human_attribute_name(:difficulty) %>:</strong></dt>
  <dd><%= @tutor.difficulty %></dd>
  <dt><strong><%= model_class.human_attribute_name(:page) %>:</strong></dt>
  <dd><%= @tutor.page %></dd>
</dl>

<%= link_to t('.back', :default => t("helpers.links.back")),
              tutors_path, :class => 'btn btn-default'  %>
<%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_tutor_path(@tutor), :class => 'btn btn-default' %>
<%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              tutor_path(@tutor),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-danger' %>

<% else %>

<%- model_class = Tutor -%>
<div role="tabpanel">

  <!-- Nav tabs -->
  <ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="active"><a href="#question" aria-controls="question" role="tab" data-toggle="tab">思考一下</a></li>
    <li role="presentation"><a href="#answer" aria-controls="answer" role="tab" data-toggle="tab">查看辅导</a></li>
  </ul>

  <!-- Tab panes -->
  <div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="question">
        <h1 style="font-size: 40px; line-height: 70px;"><%= @tutor.title %></h1>
    </div>
    <div role="tabpanel" class="tab-pane" id="answer">
      <div class="page-header">
        <h4><%= @tutor.title %></h4>
      </div>
      <% if @tutor.picture1_file_name %>
        <%= image_tag @tutor.picture1.url, class: "img-responsive center-block"  %>
      <% end %>
      <% if @tutor.picture2_file_name %>
        <%= image_tag @tutor.picture2.url, class: "img-responsive center-block"  %>
      <% end %>
      <hr>
      <div class="paragraph"> <%= sanitize(@tutor.page) %> </div>
    </div>
      <hr>
  </div>
      <hr>
</div>

<% if @practice %>
  <%= link_to "练习一下？", new_evaluation_path, class: 'btn btn-success' %>
<%= link_to "查看练习", practices_path, class: 'btn btn-default' %>
<% end %>
<% unless session[:discussion_id] %>
  <%= link_to "我来出题", new_practice_path, class: "btn btn-default" %>
<% end %>
  <hr>
<% if @lesson %>
<%= link_to "返回课文", lesson_path(@lesson), class: "btn btn-default" %>
<% end %>
<% if @previous_tutor != nil %>
    <%= link_to "上一页辅导", tutor_path(@previous_tutor), class: 'btn btn-default' %>
<% end %>
<% if @next_tutor != nil %>
  <%= link_to "下一页辅导", tutor_path(@next_tutor), class: 'btn btn-default' %>
<% end %>

<% if session[:teaching_id] %>
  <%= link_to "查看辅导的安排", plans_path, class: "btn btn-default" %>
<% end %>
<hr>
<% if current_user.id == @tutor.user_id %>	    
<%= link_to t('.new', :default => t("helpers.links.new")),
            new_tutor_path,
	    :class => 'btn btn-primary' %>
<%= link_to t('.back', :default => t("helpers.links.back")),
              tutors_path, :class => 'btn btn-default'  %>
<%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_tutor_path(@tutor), :class => 'btn btn-default' %>
<%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              tutor_path(@tutor),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-default' %>
<% end %>
<hr>
<% if @other_tutors.length >= 1 %>
<p>其他《<%= @tutor.title %>》页面：
<table class="table table-striped">
  <thead>
    <tr>
      <th>难度</th>
      <th>创建者</th>
      <th><%=t '.actions', :default => t("helpers.actions") %></th>
    </tr>
  </thead>
  <tbody>
    <% @other_tutors.each do |tutor| %>
      <tr>
        <td><%= tutor.difficulty %></td>
        <td><%= tutor.user.name %></td>
        <td>
	  <% unless tutor.id == @tutor.id %>
          <%= link_to "进入辅导页面", tutor_path(tutor), :class => 'btn btn-xs btn-success' %>
	<% if current_user.id == tutor.user_id %>
          <%= link_to t('.edit', :default => t("helpers.links.edit")),
                      edit_tutor_path(tutor), :class => 'btn btn-default btn-xs' %>
          <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                      tutor_path(tutor),
                      :method => :delete,
                      :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
		      :class => 'btn btn-xs btn-default' %>
	<% end %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<hr>
<% end %>
<% end %>
