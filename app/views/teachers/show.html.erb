<% if current_user.has_role? :admin %>  

<%- model_class = Teacher -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.titleize %></h1>
</div>

<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:user_id) %>:</strong></dt>
  <dd><%= @teacher.user_id %></dd>
  <dt><strong><%= model_class.human_attribute_name(:classroom_id) %>:</strong></dt>
  <dd><%= @teacher.classroom_id %></dd>
  <dt><strong><%= model_class.human_attribute_name(:mentor) %>:</strong></dt>
  <dd><%= @teacher.mentor %></dd>
  <dt><strong><%= model_class.human_attribute_name(:deleted_at) %>:</strong></dt>
  <dd><%= @teacher.deleted_at %></dd>
</dl>

<%= link_to t('.back', :default => t("helpers.links.back")),
              teachers_path, :class => 'btn btn-default'  %>
<%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_teacher_path(@teacher), :class => 'btn btn-default' %>
<%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              teacher_path(@teacher),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-danger' %>
<% else %>

<%- model_class = Teacher -%>

<%= link_to "返回教室", classroom_path(@teacher.classroom), class: "btn btn-default pull-right" %>
<%= link_to "查看教师团队", teachers_path, :class => 'btn btn-default'  %>
<% if current_user == @teacher.user_id %>
  <%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_teacher_path(@teacher), :class => 'btn btn-default' %>
  <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              teacher_path(@teacher),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-danger' %>
<% end %>

<div class="page-header">
  <% if current_user.id == @teacher.mentor %>
    <h3>我 在<%= @teacher.classroom.name %> 的办公桌</h3>
  <% else %>
    <h3><%= User.find(@teacher.mentor.to_i).name %> 在 <%= @teacher.classroom.name %> 的办公桌</h3>
  <% end %>
</div>

<% if current_user.id == @teacher.mentor %>  <%# 如果不是本人，则不能发布作业 %>
  <%= link_to "布置作业", new_homework_path, class: 'btn btn-default' %>
<% end %>
<%= link_to "查看作业", homeworks_path, class: 'btn btn-default' %>
<%= link_to "添加课堂教学", new_discussion_url, class: "btn btn-default" %>
<%= link_to "不良记录管理", badrecords_url, class: 'btn btn-default' %>

<% end %>
