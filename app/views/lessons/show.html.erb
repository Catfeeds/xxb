<%- model_class = Lesson -%>
<% unless current_user.has_role? :admin %> 

<% if @previous_lession %>
<%= link_to "上一篇课文", lesson_path(@previous_lession), class: 'btn btn-default' %>
<% end %>
<% if @next_lession %>
<%= link_to "下一篇课文", lesson_path(@next_lession), class: 'btn btn-default' %>
<% end %>
<%= link_to "返回课本目录", catalogs_path, class: 'btn btn-default' %>

<div class="page-header">
  <h1><%= @lesson.title %></h1>
</div>
  <div class="paragraph"><%= sanitize(@lesson.content) %></div>

<hr>
<% if @tutor %>
  <%= link_to "标准辅导", tutor_path(@tutor), class: 'btn btn-success' %>
<% end %>
<%= link_to "所有教学方案", teachings_path, class: 'btn btn-default' %>
<hr>
<% if current_user.id == @lesson.user_id  %>
<%= link_to t('.back', :default => t("helpers.links.back")),
              lessons_path, :class => 'btn btn-default'  %>
<%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_lesson_path(@lesson), :class => 'btn btn-default' %>
<%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              lesson_path(@lesson),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-default' %>
<% end %>

<% else %>

<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.titleize %></h1>
</div>

<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:title) %>:</strong></dt>
  <dd><%= @lesson.title %></dd>
  <dt><strong><%= model_class.human_attribute_name(:content) %>:</strong></dt>
  <dd><%= @lesson.content %></dd>
  <dt><strong><%= model_class.human_attribute_name(:user_id) %>:</strong></dt>
  <dd><%= @lesson.user_id %></dd>
</dl>

<%= link_to t('.back', :default => t("helpers.links.back")),
              lessons_path, :class => 'btn btn-default'  %>
<%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_lesson_path(@lesson), :class => 'btn btn-default' %>
<%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              lesson_path(@lesson),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-danger' %>
<% end %>
